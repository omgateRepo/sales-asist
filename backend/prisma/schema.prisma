generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model tenants {
  id        String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name      String
  status    String   @default("pending") // pending | active
  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @default(now()) @db.Timestamptz(6)
  users     users[]
}

model users {
  id            String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  email         String   @unique
  display_name  String
  password_hash String
  role          String   @default("company_admin") // platform_admin | company_admin
  tenant_id     String?  @db.Uuid
  is_super_admin Boolean @default(false) // true when role = platform_admin (for backward compat)
  created_at    DateTime @default(now()) @db.Timestamptz(6)
  updated_at    DateTime @default(now()) @db.Timestamptz(6)
  tenant        tenants? @relation(fields: [tenant_id], references: [id], onDelete: SetNull)
}
